<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Customer Churn Analyzer</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* ===== GLOBAL ===== */
body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#020617,#0f172a);
  color:white;
}

nav{
  display:flex;
  justify-content:space-between;
  padding:15px 30px;
  background:#00000066;
  backdrop-filter:blur(12px);
  box-shadow:0 0 20px #000000aa;
}

nav h2{color:#38bdf8;margin:0}

nav button{
  margin-left:10px;
  padding:8px 14px;
  border:none;
  border-radius:8px;
  background:#0ea5e9;
  color:white;
  cursor:pointer;
  transition:.3s;
}

nav button:hover{background:#0284c7;transform:scale(1.05)}

.container{padding:25px}

/* ===== HOME IMAGES ===== */
.home-images{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  margin-top:20px;
}

.home-images img{
  width:100%;
  height:180px;
  object-fit:cover;
  border-radius:15px;
  box-shadow:0 0 20px #000;
  transition:.4s;
}

.home-images img:hover{transform:scale(1.05)}

/* ===== CARDS ===== */
.card{
  background:#ffffff10;
  border-radius:16px;
  padding:20px;
  margin-top:20px;
  box-shadow:0 0 25px #00000088;
  animation:fadeIn 1s ease;
}

/* ===== INPUTS ===== */
input,button{
  padding:10px;
  margin:6px;
  border:none;
  border-radius:8px;
}

input{width:200px}

button{
  background:#22c55e;
  color:white;
  cursor:pointer;
}

button:hover{background:#16a34a}

/* ===== CHART GRID ===== */
.chart-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:20px;
}

.chart-box{
  background:#00000044;
  padding:10px;
  border-radius:12px;
  height:260px;
}

canvas{height:200px !important}

/* ===== CHATBOT ===== */
.chatbox{
  height:220px;
  overflow:auto;
  background:#00000055;
  padding:10px;
  border-radius:10px;
  margin-bottom:10px;
}

/* ===== HISTORY ===== */
.history-item{
  background:#00000044;
  padding:10px;
  border-radius:10px;
  margin:8px 0;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}
</style>


<!-- ===== NAVBAR ===== -->
<nav>
  <h2>Customer Churn Analyzer</h2>
  <div>
    <button onclick="showSection('home')">Home</button>
    <button onclick="showSection('auth')">Login</button>
    <button onclick="showSection('dashboard')">Dashboard</button>
    <button onclick="showSection('history')">History</button>
  </div>
</nav>

<div class="container">

<!-- ===== HOME ===== -->
<div id="home" class="card">
  <h2>Welcome ðŸ‘‹</h2>
  <p>
    Analyze customer churn, upload datasets, visualize insights,
    and get AI suggestions to retain customers.
  </p>
</div>
<div class="home-images">
      <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71">
      <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f">
      <img src="https://images.unsplash.com/photo-1551434678-e076c223a692">
      <img src="https://images.unsplash.com/photo-1543286386-713bdd548da4">
    </div>
  </div>
</div>
<!-- ===== AUTH ===== -->
<div id="auth" class="card" style="display:none">
  <h2>Register</h2>
  <input id="name" placeholder="Name">
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="register()">Register</button>

  <h2>Login</h2>
  <input id="loginEmail" placeholder="Email">
  <input id="loginPassword" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- ===== DATASET UPLOAD ===== -->
<div id="dashboard" style="display:none">

  <div class="card">
    <h2>Upload Dataset (CSV)</h2>
    <input type="file" id="file">
    <button onclick="uploadFile()">Upload & Analyze</button>
  </div>

  <!-- ===== CHARTS ===== -->
  <div class="card">
    <h2>Churn Distribution</h2>
    <canvas id="pieChart"></canvas>
  </div>

  <div class="card">
    <h2>Bar Graph</h2>
    <canvas id="barChart"></canvas>
  </div>

  <div class="card">
    <h2>Histogram / Trends</h2>
    <canvas id="lineChart"></canvas>
  </div>

  <!-- ===== CHATBOT ===== -->
  <div class="card">
    <h2>AI Chatbot Suggestions</h2>

    <div class="chatbox" id="chatbox"></div>

    <input id="chatInput" placeholder="Ask about churn...">
    <button onclick="sendMessage()">Send</button>
  </div>

</div>

</div>
<!-- ===== HISTORY ===== -->
<div id="history" style="display:none">
  <div class="card">
    <h3>Recent Upload History</h3>
    <div id="historyList"></div>
  </div>
</div>

</div>


<script>
/* ===== NAVIGATION ===== */
function showSection(id){
  document.getElementById("home").style.display="none";
  document.getElementById("auth").style.display="none";
  document.getElementById("dashboard").style.display="none";
  document.getElementById(id).style.display="block";
}

/* ===== AUTH (Demo) ===== */
function register(){
  alert("Registered Successfully (Demo)");
}

function login(){
  alert("Login Successful (Demo)");
  showSection("dashboard");
}

/* ===== FILE UPLOAD + ANALYSIS ===== */
function uploadFile(){

  // Demo churn data
  const churnYes = Math.floor(Math.random()*100);
  const churnNo = Math.floor(Math.random()*200);

  /* ===== PIE ===== */
  new Chart(document.getElementById("pieChart"),{
    type:"pie",
    data:{
      labels:["Churn Yes","Churn No"],
      datasets:[{
        data:[churnYes,churnNo]
      }]
    }
  });

  /* ===== BAR ===== */
  new Chart(document.getElementById("barChart"),{
    type:"bar",
    data:{
      labels:["Jan","Feb","Mar","Apr","May"],
      datasets:[{
        label:"Churn Trend",
        data:[
          12,19,8,15,10
        ]
      }]
    }
  });

  /* ===== LINE ===== */
  new Chart(document.getElementById("lineChart"),{
    type:"line",
    data:{
      labels:["Week1","Week2","Week3","Week4"],
      datasets:[{
        label:"Customer Loss",
        data:[5,9,6,12],
        fill:false
      }]
    }
  });

  alert("Dataset Uploaded & Analyzed (Demo)");
}

/* ===== AI CHATBOT ===== */
function sendMessage(){

  const input = document.getElementById("chatInput").value;
  const chatbox = document.getElementById("chatbox");

  let reply="";

  if(input.includes("reduce")){
    reply="Provide loyalty rewards and improve support.";
  }
  else if(input.includes("high risk")){
    reply="Target high-risk customers with offers.";
  }
  else if(input.includes("why churn")){
    reply="Poor service and pricing are major churn causes.";
  }
  else{
    reply="Analyze feedback and engagement data.";
  }

  chatbox.innerHTML += `<p><b>You:</b> ${input}</p>`;
  chatbox.innerHTML += `<p><b>AI:</b> ${reply}</p>`;

  document.getElementById("chatInput").value="";
}
/* ===== HISTORY LOAD ===== */
function loadHistory(){
  const data=JSON.parse(localStorage.getItem("history")||"[]");
  historyList.innerHTML="";

  data.forEach(d=>{
    historyList.innerHTML+=`
      <div class="history-item">
        <b>File:</b> ${d.file}<br>
        <b>Uploaded:</b> ${d.time}
      </div>`;
  });
}

loadHistory();
</script>


</body>
</html>
